# ProTradeAI Pro+ Production Configuration for Replit
modules = ["python-3.11"]

# Main bot runner command
run = "python main.py"

# Enhanced startup script for production
entrypoint = "main.py"

# Enable hidden files (for .env, .git, etc.)
hidden = [".env", ".git", ".replit", ".config"]

# Nix packages for production
[nix]
channel = "stable-24_05"
packages = [
  "cargo",
  "glibcLocales", 
  "libiconv",
  "libxcrypt",
  "pkg-config",
  "rustc",
  "xsimd",
  # Additional production packages
  "gcc",
  "openssl",
  "zlib"
]

# Port configuration for dashboard and monitoring
[[ports]]
localPort = 5000
externalPort = 80
exposedPort = 5000

# Health check endpoint
[[ports]]
localPort = 8080
externalPort = 8080

# Production deployment configuration
[deployment]
run = ["sh", "-c", "python main.py"]
deploymentTarget = "cloudrun"
publicDir = "/"

# Environment variables (use Secrets for actual values)
[env]
ENVIRONMENT = "production"
LOG_LEVEL = "INFO"
PYTHONPATH = "."
PYTHONUNBUFFERED = "1"

# Gunicorn configuration for dashboard (production WSGI)
[unitTest]
language = "python3"

# Production startup commands
[languages]

[languages.python3]
pattern = "**/*.py"

[languages.python3.languageServer]
start = "pylsp"

# GitHub integration
[gitHubImport]
requiredFiles = [".replit", "replit.nix", "main.py", "requirements.txt"]

# Replit specific configurations
[packager]
language = "python3"

[packager.features]
enabledForHosting = false
packageSearch = true
guessImports = true

# Audio/Video disabled for trading bot
[audio]
enabled = false

[video]
enabled = false

# Database configuration (if using Replit DB)
[database]
enabled = false

# Production monitoring
[debugger]
support = true

# Enhanced security for production
[hosting]
enabled = true

# Storage permissions
[storage]
enabled = true